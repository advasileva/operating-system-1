# Операционные системы ИДЗ 1

0. [**Задание**](#задание)
0. [**Отчёт**](#отчёт)
    + [*4 балла*](#4-балла)
    + [*5 баллов*](#5-баллов)
    + [*6 баллов*](#6-баллов)
    + [*7 баллов*](#7-баллов)
    + [*8 баллов*](#8-баллов)
    + [*9 баллов*](#9-баллов)
0. [**Как запустить**](#как-запустить)

## Задание

*Применение каналов при обработке строк символов.*

*Вариант 12. Разработать программу, определяющую минимальный и максимальный (по числовому значению) символ в заданной ASCII-строке.*

## Отчёт

**Исполнитель: Васильева Алёна Дмитриевна БПИ218**

**Делала на оценку 9 баллов**

### 4 балла

*Разработка программы, осуществляющей взаимодействие между тремя дочерними процессами с использованием неименованных каналов.*

1. *В отчете приведены фамилия, имя, отчество исполнителя, группа.*

    Продублирую: Васильева Алёна Дмитриевна БПИ218

2. *Приведено условие задачи.*

    [Условие](#задание)

3. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами.*

    Как решается задача? есть 3 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп
    + третий читатет результат из пайпа и записывает в файл

    Таким образом первый и третий процессы работают с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

4. *Разработано консольное приложение, использующее неименованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через неименованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через неименованный канал третьему процессу;*
    + *третий процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файле `4-points/main.c`

5. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

6. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

7. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

8. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

9. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `4-points/test$i.out`

10. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 4 points
    Test 1
    Reader PID: 57243
    Processor PID: 57244
    Writer PID: 57245
    Test 2
    Reader PID: 57249
    Processor PID: 57250
    Writer PID: 57251
    Test 3
    Reader PID: 57255
    Processor PID: 57256
    Writer PID: 57257
    Test 4
    Reader PID: 57261
    Processor PID: 57262
    Writer PID: 57263
    Test 5
    Reader PID: 57267
    Processor PID: 57268
    Writer PID: 57269
    ```

### 5 баллов

*В дополнение к требованиям на предыдущую оценку необходимо разработать программу, в которой взаимодействие между тремя дочерними процессами осуществляется через именованные каналы.*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами. Необходимо также указать имена каналов и способ их создания, используемый в работе.*

   Как решается задача? есть 3 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп
    + третий читатет результат из пайпа и записывает в файл

    Таким образом первый и третий процессы работают с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

    Каналы называются `input` и `output` и создаются через `mknod()`

    Пример создания канала для записи:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_WRONLY);
    ```

    Пример создания канала для чтения:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_RDONLY);
    ```

2. *Разработано консольное приложение, использующее именованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через именованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через именованный канал третьему процессу;*
    + *третий процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файле `5-points/main.c`

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `5-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 5 points
    Test 1
    Reader PID: 57477
    Processor PID: 57478
    Writer PID: 57479
    Test 2
    Reader PID: 57483
    Processor PID: 57484
    Writer PID: 57485
    Test 3
    Reader PID: 57489
    Processor PID: 57490
    Writer PID: 57491
    Test 4
    Reader PID: 57495
    Processor PID: 57496
    Writer PID: 57497
    Test 5
    Reader PID: 57501
    Processor PID: 57502
    Writer PID: 57503
    ```

### 6 баллов
    
*В дополнение к требованиям на предыдущую оценку разработать программу, которая осуществляет взаимодействие между двумя дочерними процессами с использованием неименованных каналов.*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами. Необходимо также указать имена каналов и способ их создания, используемый в работе.*

    Как решается задача? есть 2 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп, а также читатет результат из пайпа и записывает в файл
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп

    Таким образом первый процесс работает с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

2. * Разработано консольное приложение, использующее неименованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через неименованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через неименованный канал обратно первому процессу;*
    + *первый процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файле `6-points/main.c`

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `6-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 6 points
    Test 1
    Reader PID: 57508
    Writer PID: 57508
    Processor PID: 57509
    Test 2
    Reader PID: 57513
    Writer PID: 57513
    Processor PID: 57514
    Test 3
    Reader PID: 57518
    Writer PID: 57518
    Processor PID: 57519
    Test 4
    Reader PID: 57523
    Writer PID: 57523
    Processor PID: 57524
    Test 5
    Reader PID: 57528
    Writer PID: 57528
    Processor PID: 57529
    ```

### 7 баллов

*В дополнение к требованиям на предыдущую оценку разработать программу, которая осуществляет взаимодействие между двумя дочерними процессами с использованием именованных каналов*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами. Необходимо также указать имена каналов и способ их создания, используемый в работе.*

    Как решается задача? есть 2 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп, а также читатет результат из пайпа и записывает в файл
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп

    Таким образом первый процесс работает с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

    Каналы называются `input` и `output` и создаются через `mknod()`

    Пример создания канала для записи:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_WRONLY);
    ```

    Пример создания канала для чтения:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_RDONLY);
    ```

2. *Разработано консольное приложение, использующее именованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через именованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через именованный канал обратно первому процессу;*
    + *первый процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файле `7-points/main.c`

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `7-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 7 points
    Test 1
    Reader PID: 57534
    Processor PID: 57535
    Writer PID: 57534
    Test 2
    Reader PID: 57539
    Processor PID: 57540
    Writer PID: 57539
    Test 3
    Reader PID: 57544
    Processor PID: 57545
    Writer PID: 57544
    Test 4
    Reader PID: 57549
    Processor PID: 57550
    Writer PID: 57549
    Test 5
    Reader PID: 57554
    Processor PID: 57555
    Writer PID: 57554
    ```

### 8 баллов

*В дополнение к требованиям на предыдущую оценку разработать программу, которая осуществляет взаимодействие между двумя независимыми (неродственными) процессами с использованием именованных каналов*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами.*

    Как решается задача? есть 2 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп, а также читатет результат из пайпа и записывает в файл
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп

    Таким образом первый процесс работает с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

    Каналы называются `input` и `output` и создаются через `mknod()`

    Пример создания канала для записи:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_WRONLY);
    ```

    Пример создания канала для чтения:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_RDONLY);
    ```

2. *Разработано консольное приложение, использующее именованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через именованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через именованный канал обратно первому процессу;*
    + *первый процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файлах `8-points/first.c` и `8-points/second.c`

    От предыдущего пункта отличается тем, что теперь компилируется и запускается два исходных файла. Таким образом получается два независимых процесса, которые взаимодействуют через именованные каналы.

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `8-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 8 points
    Test 1
    Reader PID: 59927
    Processor PID: 59928
    Writer PID: 59927
    Test 2
    Processor PID: 59932
    Reader PID: 59931
    Writer PID: 59931
    Test 3
    Reader PID: 59935
    Processor PID: 59936
    Writer PID: 59935
    Test 4
    Reader PID: 59939
    Processor PID: 59940
    Writer PID: 59939
    Test 5
    Reader PID: 59943
    Processor PID: 59944
    Writer PID: 59943
    Test 6
    Processor PID: 59948
    Reader PID: 59947
    Writer PID: 59947
    Test 7
    Reader PID: 59951
    Processor PID: 59952
    Writer PID: 59951
    ```

### 9 баллов

*В дополнение к требованиям на предыдущую оценку разработать программу, которая осуществляет взаимодействие между двумя независимыми процессами с использованием именованных каналов. Обмен данным ведется ограниченными порциями текста.*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами.*

    Как решается задача? есть 2 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп, а также читатет результат из пайпа и записывает в файл
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп

    Таким образом первый процесс работает с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

    Каналы называются `input` и `output` и создаются через `mknod()`

    Пример создания канала для записи:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_WRONLY);
    ```

    Пример создания канала для чтения:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_RDONLY);
    ```

2. *Разработано консольное приложение, использующее именованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает ограниченную порцию текстовых данных из заданного файла и через именованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку части данных в соответствии с заданием и при необходимости передает результат обработки (если он при этом сформировался) через именованный канал обратно первому процессу или получает от него следующую порцию;*
    + *первый процесс осуществляет вывод результата в заданный файл или сразу, или по частям в зависимости от условия задачи и размера буфера, используемого для пересылки данных.*

     Реализованное по указанному сценарию приложение находится в файлах `9-points/first.c` и `9-points/second.c`

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. * Размеры буферов для хранения вводимых данных и результатов обработки должны быть не более 200 байт. Допускается работа только с файлам произвольного размера. То есть необходимы циклическое считывание файла, передача его фрагментов по каналам и (если возможно) обработка. Обосновать увеличение размера буфера для обработки файла во втором процессе, если обработка данных по частям невозможна.*

    TBA

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `9-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    
    ```

## Как запустить

На тестовом наборе (если результат будет отличаться от ожидаемого, то выведется diff, поэтому нет diff'а => всё хорошо (или всё плохо, потому что что-то критично сломалось)):

```bash
make run
```

Перекомпилировать:

```bash
make compile
```

Удалить результаты тестов:

```bash
make clear
```
