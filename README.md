# Операционные системы ИДЗ 1

0. [**Задание**](#задание)
0. [**Отчёт**](#отчёт)
    + [*4 балла*](#4-балла)
    + [*5 баллов*](#5-баллов)
    + [*6 баллов*](#6-баллов)
    + [*7 баллов*](#7-баллов)
    + [*8 баллов*](#8-баллов)
    + [*9 баллов*](#9-баллов)
0. [**Как запустить**](#как-запустить)

## Задание

*Применение каналов при обработке строк символов.*

*Вариант 12. Разработать программу, определяющую минимальный и максимальный (по числовому значению) символ в заданной ASCII-строке.*

## Отчёт

**Исполнитель: Васильева Алёна Дмитриевна БПИ218**

**Делала на оценку 9 баллов**

### 4 балла

*Разработка программы, осуществляющей взаимодействие между тремя дочерними процессами с использованием неименованных каналов.*

1. *В отчете приведены фамилия, имя, отчество исполнителя, группа.*

    Продублирую: Васильева Алёна Дмитриевна БПИ218

2. *Приведено условие задачи.*

    [Условие](#задание)

3. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами.*

    Как решается задача? есть 3 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп
    + третий читатет результат из пайпа и записывает в файл

    Таким образом первый и третий процессы работают с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

4. *Разработано консольное приложение, использующее неименованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через неименованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через неименованный канал третьему процессу;*
    + *третий процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файле `4-points/main.c`

5. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

6. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

7. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

8. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

9. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `4-points/test$i.out`

10. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 4 points
    Test 1
    Reader PID: 74426
    Processor PID: 74427
    Writer PID: 74428
    Test 2
    Reader PID: 74432
    Processor PID: 74433
    Writer PID: 74434
    Test 3
    Reader PID: 74438
    Processor PID: 74439
    Writer PID: 74440
    Test 4
    Reader PID: 74444
    Processor PID: 74445
    Writer PID: 74446
    Test 5
    Reader PID: 74450
    Processor PID: 74451
    Writer PID: 74452
    Test 6
    Reader PID: 74456
    Processor PID: 74457
    Writer PID: 74458
    Test 7
    Reader PID: 74462
    Processor PID: 74463
    Writer PID: 74464
    ```

### 5 баллов

*В дополнение к требованиям на предыдущую оценку необходимо разработать программу, в которой взаимодействие между тремя дочерними процессами осуществляется через именованные каналы.*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами. Необходимо также указать имена каналов и способ их создания, используемый в работе.*

   Как решается задача? есть 3 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп
    + третий читатет результат из пайпа и записывает в файл

    Таким образом первый и третий процессы работают с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

    Каналы называются `input` и `output` и создаются через `mknod()`

    Пример создания канала для записи:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_WRONLY);
    ```

    Пример создания канала для чтения:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_RDONLY);
    ```

2. *Разработано консольное приложение, использующее именованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через именованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через именованный канал третьему процессу;*
    + *третий процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файле `5-points/main.c`

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `5-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 5 points
    Test 1
    Reader PID: 74469
    Processor PID: 74470
    Writer PID: 74471
    Test 2
    Reader PID: 74475
    Processor PID: 74476
    Writer PID: 74477
    Test 3
    Reader PID: 74481
    Processor PID: 74482
    Writer PID: 74483
    Test 4
    Reader PID: 74487
    Processor PID: 74488
    Writer PID: 74489
    Test 5
    Reader PID: 74493
    Processor PID: 74494
    Writer PID: 74495
    Test 6
    Reader PID: 74499
    Processor PID: 74500
    Writer PID: 74501
    Test 7
    Reader PID: 74505
    Processor PID: 74506
    Writer PID: 74507
    ```

### 6 баллов
    
*В дополнение к требованиям на предыдущую оценку разработать программу, которая осуществляет взаимодействие между двумя дочерними процессами с использованием неименованных каналов.*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами. Необходимо также указать имена каналов и способ их создания, используемый в работе.*

    Как решается задача? есть 2 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп, а также читатет результат из пайпа и записывает в файл
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп

    Таким образом первый процесс работает с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

2. * Разработано консольное приложение, использующее неименованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через неименованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через неименованный канал обратно первому процессу;*
    + *первый процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файле `6-points/main.c`

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `6-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 6 points
    Test 1
    Reader PID: 74514
    Writer PID: 74514
    Processor PID: 74515
    Test 2
    Reader PID: 74519
    Writer PID: 74519
    Processor PID: 74520
    Test 3
    Reader PID: 74524
    Writer PID: 74524
    Processor PID: 74525
    Test 4
    Reader PID: 74529
    Writer PID: 74529
    Processor PID: 74530
    Test 5
    Reader PID: 74534
    Writer PID: 74534
    Processor PID: 74535
    Test 6
    Reader PID: 74539
    Writer PID: 74539
    Processor PID: 74540
    Test 7
    Reader PID: 74544
    Writer PID: 74544
    Processor PID: 74545
    ```

### 7 баллов

*В дополнение к требованиям на предыдущую оценку разработать программу, которая осуществляет взаимодействие между двумя дочерними процессами с использованием именованных каналов*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами. Необходимо также указать имена каналов и способ их создания, используемый в работе.*

    Как решается задача? есть 2 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп, а также читатет результат из пайпа и записывает в файл
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп

    Таким образом первый процесс работает с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

    Каналы называются `input` и `output` и создаются через `mknod()`

    Пример создания канала для записи:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_WRONLY);
    ```

    Пример создания канала для чтения:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_RDONLY);
    ```

2. *Разработано консольное приложение, использующее именованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через именованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через именованный канал обратно первому процессу;*
    + *первый процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файле `7-points/main.c`

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `7-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 7 points
    Test 1
    Reader PID: 74562
    Processor PID: 74563
    Writer PID: 74562
    Test 2
    Reader PID: 74567
    Processor PID: 74568
    Writer PID: 74567
    Test 3
    Reader PID: 74572
    Processor PID: 74573
    Writer PID: 74572
    Test 4
    Reader PID: 74577
    Processor PID: 74578
    Writer PID: 74577
    Test 5
    Reader PID: 74582
    Processor PID: 74583
    Writer PID: 74582
    Test 6
    Reader PID: 74587
    Processor PID: 74588
    Writer PID: 74587
    Test 7
    Reader PID: 74592
    Processor PID: 74593
    Writer PID: 74592
    ```

### 8 баллов

*В дополнение к требованиям на предыдущую оценку разработать программу, которая осуществляет взаимодействие между двумя независимыми (неродственными) процессами с использованием именованных каналов*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами.*

    Как решается задача? есть 2 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп, а также читатет результат из пайпа и записывает в файл
    + второй читает строку из пайпа, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп

    Таким образом первый процесс работает с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

    Каналы называются `input` и `output` и создаются через `mknod()`

    Пример создания канала для записи:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_WRONLY);
    ```

    Пример создания канала для чтения:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_RDONLY);
    ```

2. *Разработано консольное приложение, использующее именованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает текстовые данные из заданного файла и через именованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку данных в соответствии с заданием и передает результат обработки через именованный канал обратно первому процессу;*
    + *первый процесс осуществляет вывод данных в заданный файл.*

    Реализованное по указанному сценарию приложение находится в файлах `8-points/first.c` и `8-points/second.c`

    От предыдущего пункта отличается тем, что теперь компилируется и запускается два исходных файла. Таким образом получается два независимых процесса, которые взаимодействуют через именованные каналы.

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не менее 5000 байт. Допускается работа только с такими файлам, которые за одно заносятся в буфер за одно чтение. То есть допускается работа с файлом ограниченного размера. Это позволяет не накладывать дополнительных условий на алгоритмы обработки данных.*

    Программа использует буффер ровно из 5000 байт и обрабатывает файлы не больше такого размера. Чтобы обрабатывать файлы меньшего размера потребовалось передавать размер строки между первым и вторым процессами, что так же реализовано через пайп (альтернативным вариантом была обработка вторым процессом до зарезервированного символа)

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `8-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 8 points
    Test 1
    Reader PID: 74598
    Processor PID: 74599
    Writer PID: 74598
    Test 2
    Processor PID: 74603
    Reader PID: 74602
    Writer PID: 74602
    Test 3
    Reader PID: 74606
    Processor PID: 74607
    Writer PID: 74606
    Test 4
    Processor PID: 74611
    Reader PID: 74610
    Writer PID: 74610
    Test 5
    Reader PID: 74614
    Processor PID: 74615
    Writer PID: 74614
    Test 6
    Processor PID: 74619
    Reader PID: 74618
    Writer PID: 74618
    Test 7
    Reader PID: 74622
    Processor PID: 74623
    Writer PID: 74622
    ```

### 9 баллов

*В дополнение к требованиям на предыдущую оценку разработать программу, которая осуществляет взаимодействие между двумя независимыми процессами с использованием именованных каналов. Обмен данным ведется ограниченными порциями текста.*

1. *Представлена общая схема решаемой задачи. Достаточно показать процессы и связи между ними, а также связи процессов с входным и выходным файлами.*

    Как решается задача? есть 2 процесса
    + первый отвечает за чтение строки и передачу её размера и самой строки второму процессу через пайп чанками, а также читатет результат из пайпа и записывает в файл
    + второй читает строку из пайпа чанками, итерируется по ней, вычисляя минимальный и максимальный элементы, и записывает результат в пайп

    Таким образом первый процесс работает с входными и выходными файлами, а второй отвечает только за "бизнес-логику"

    Каналы называются `input` и `output` и создаются через `mknod()`

    Пример создания канала для записи:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_WRONLY);
    ```

    Пример создания канала для чтения:
    ```c
    int fd;
    mknod(name, S_IFIFO | 0666, 0);
    fd = open(name, O_RDONLY);
    ```

2. *Разработано консольное приложение, использующее именованные каналы, обеспечивающее взаимодействие по следующей схеме:*
    + *первый процесс читает ограниченную порцию текстовых данных из заданного файла и через именованный канал передает их второму процессу;*
    + *второй процесс осуществляет обработку части данных в соответствии с заданием и при необходимости передает результат обработки (если он при этом сформировался) через именованный канал обратно первому процессу или получает от него следующую порцию;*
    + *первый процесс осуществляет вывод результата в заданный файл или сразу, или по частям в зависимости от условия задачи и размера буфера, используемого для пересылки данных.*

     Реализованное по указанному сценарию приложение находится в файлах `9-points/first.c` и `9-points/second.c`

3. *Для задания имен входного и выходного файлов используются аргументы командной строки.*

    Первый аргумент командной строки это имя входного файла, второй -- выходного

4. *Ввод и вывод данных при работе с файлами осуществляется через системные вызовы read и write.*

    Так и сделано

5. *Размеры буферов для хранения вводимых данных и результатов обработки должны быть не более 200 байт. Допускается работа только с файлам произвольного размера. То есть необходимы циклическое считывание файла, передача его фрагментов по каналам и (если возможно) обработка. Обосновать увеличение размера буфера для обработки файла во втором процессе, если обработка данных по частям невозможна.*

    Сделала буферы размером 10 байт, чтобы проверить на своих небольших тестах. То есть чтение из файла и запись в пайп первым потоком происходит такими порциями. Второй поток так же читает по 10 байт, обрабатывает этот чанк (обновляет минимальный и максимальный элементы). Увеличение буфера не потребовалось.

6. *Представлен набор (не менее пяти) текстовых файлов, на которых проводилось тестирование программы.*

    Набор тестовых файлов находится в директории `tests/`

7. *Для каждого из тестовых файлов представлен файл, полученный в результате работы программы.*

    Результат программы для `i`-го теста находится в файле `9-points/test$i.out`

8. *Результаты работы приведены в отчете.*

    Пример работы:
    ```bash
    Program for 9 points
    Test 1
    Reader PID: 74627
    Processor PID: 74628
    Writer PID: 74627
    Test 2
    Reader PID: 74631
    Processor PID: 74632
    Writer PID: 74631
    Test 3
    Reader PID: 74635
    Processor PID: 74636
    Writer PID: 74635
    Test 4
    Processor PID: 74640
    Reader PID: 74639
    Writer PID: 74639
    Test 5
    Reader PID: 74643
    Processor PID: 74644
    Writer PID: 74643
    Test 6
    Reader PID: 74647
    Processor PID: 74648
    Writer PID: 74647
    Test 7
    Reader PID: 74651
    Processor PID: 74652
    Writer PID: 74651
    ```

## Как запустить

На тестовом наборе (если результат будет отличаться от ожидаемого, то выведется diff, поэтому нет diff'а => всё хорошо (или всё плохо, потому что что-то критично сломалось)):

```bash
make run
```

Перекомпилировать:

```bash
make compile
```

Удалить результаты тестов:

```bash
make clear
```
